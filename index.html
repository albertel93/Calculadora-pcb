<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Calculadora de Inserción (Final)</title>
  <style>
    body{font-family:sans-serif;background:#0f1115;color:#eee;padding:20px;margin:0}
    .card{background:#161a22;padding:20px;border-radius:12px;margin-bottom:20px}
    label{display:block;margin-top:10px}
    input{width:100%;padding:8px;margin-top:4px;border-radius:6px;border:1px solid #333;background:#0b0f16;color:#fff}
    button{margin-top:15px;padding:10px 14px;border:0;border-radius:6px;cursor:pointer;font-weight:600}
    #calcBtn{background:#6ee7b7;color:#000}
    #resetBtn{background:#333;color:#eee;margin-left:10px}
    .kpi{margin:6px 0;padding:8px;border:1px solid #333;border-radius:6px;display:flex;justify-content:space-between}
  </style>
</head>
<body>
  <div class="card">
    <h2>Entradas</h2>
    <label>Cantidad de placas <input id="qty" type="number" value="1"></label>
    <label>Componentes TOP por placa <input id="topCount" type="number" value="10"></label>
    <label>Componentes BOTTOM por placa <input id="botCount" type="number" value="5"></label>
    <label>Componentes SMD por placa <input id="smdCount" type="number" value="20"></label>
    <label>Precio TOP por componente (€) <input id="topPrice" type="number" step="0.0001" value="0.06"></label>
    <label>Precio BOTTOM por componente (€) <input id="botPrice" type="number" step="0.0001" value="0.13"></label>
    <label>Precio SMD por componente (€) <input id="smdPrice" type="number" step="0.0001" value="0.13"></label>
    <button id="calcBtn" type="button" onclick="calc()">Calcular</button>
    <button id="resetBtn" type="button" onclick="resetAll()">Reset</button>
  </div>

  <div class="card">
    <h2>Resultados (sin IVA)</h2>
    <div class="kpi"><span>Coste TOP por placa</span><span id="topPerBoard">—</span></div>
    <div class="kpi"><span>Coste BOTTOM por placa</span><span id="botPerBoard">—</span></div>
    <div class="kpi"><span>Coste SMD por placa</span><span id="smdPerBoard">—</span></div>
    <div class="kpi"><strong>Total por placa</strong><strong id="totalPerBoard">—</strong></div>
    <div class="kpi"><strong>Total del lote</strong><strong id="totalLot">—</strong></div>
  </div>

  <script>
    var EUR_TO_PTAS = 166.386;
    function euroConPesetas(v){
      var eur = Math.round(v*10000)/10000;
      var pta = Math.round(v*EUR_TO_PTAS*100)/100;
      return "€ " + eur.toFixed(4) + " (" + pta.toFixed(2) + " ptas)";
    }
    function num(v){ v = String(v).replace(',', '.'); var n = parseFloat(v); return isFinite(n) ? n : 0; }
    function setText(id, val){ document.getElementById(id).textContent = val; }

    function calc(){
      var qty = num(document.getElementById("qty").value);
      var topCount = num(document.getElementById("topCount").value);
      var botCount = num(document.getElementById("botCount").value);
      var smdCount = num(document.getElementById("smdCount").value);
      var topPrice = num(document.getElementById("topPrice").value);
      var botPrice = num(document.getElementById("botPrice").value);
      var smdPrice = num(document.getElementById("smdPrice").value);

      var top = topCount * topPrice;
      var bot = botCount * botPrice;
      var smd = smdCount * smdPrice;
      var total = top + bot + smd;
      var lot = total * qty;

      setText("topPerBoard", euroConPesetas(top));
      setText("botPerBoard", euroConPesetas(bot));
      setText("smdPerBoard", euroConPesetas(smd));
      setText("totalPerBoard", euroConPesetas(total));
      setText("totalLot", euroConPesetas(lot));
    }

    function resetAll(){
      ["qty","topCount","botCount","smdCount","topPrice","botPrice","smdPrice"].forEach(function(id){
        document.getElementById(id).value = "";
      });
      ["topPerBoard","botPerBoard","smdPerBoard","totalPerBoard","totalLot"].forEach(function(id){
        setText(id, "—");
      });
    }
    calc();
  </script>
</body>
</html>
